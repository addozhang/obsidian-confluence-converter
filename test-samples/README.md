# Test Samples for Obsidian Confluence Toolkit

This directory contains comprehensive test samples for validating the Markdown to Confluence Wiki Markup conversion functionality.

## Files

### [`markdown-test-sample.md`](markdown-test-sample.md)
A comprehensive Markdown file containing all supported syntax elements that should be converted by the plugin.

**Purpose:** Use this as input to test the plugin's conversion capabilities.

**How to use:**
1. Open this file in Obsidian
2. Select all text (Cmd/Ctrl+A) or test specific sections
3. Run the command: "Convert to Confluence wiki markup and copy to clipboard" (Cmd/Ctrl+P)
4. The converted content will be copied to your clipboard
5. Paste into Confluence editor (Insert > Markup > Markdown)

### [`expected-confluence-output.txt`](expected-confluence-output.txt)
The actual Confluence Wiki Markup output generated by converting [`markdown-test-sample.md`](markdown-test-sample.md) through the plugin.

**Purpose:** Expected output for automated testing and validation.

**How to use:**
1. Compare plugin output against this file to verify conversion accuracy
2. Used by integration tests to validate conversion results
3. Paste directly into Confluence to verify rendering

**Note:** This file is auto-generated from [`markdown-test-sample.md`](markdown-test-sample.md) using the plugin's conversion logic.

## Test Coverage

Both files comprehensively cover:

### ✅ Basic Text Formatting
- Bold, italic, strikethrough
- Inline code
- Headings (levels 1-6)

### ✅ Lists
- Unordered (bullet) lists
- Ordered (numbered) lists
- Nested lists (multiple levels)
- Mixed nested lists
- Task lists / checkboxes

### ✅ Links
- External links
- Links with titles
- Reference-style links
- Obsidian wikilinks (in Markdown file)

### ✅ Images
- Simple images
- Images with alt text and titles
- Obsidian-style images (`![[filename]]`)
- Images with parameters

### ✅ Tables
- Simple tables
- Tables with alignment
- Tables with formatted content
- Complex nested content in tables

### ✅ Code Blocks
- Multiple programming languages:
  - JavaScript / TypeScript
  - Python
  - Java
  - SQL
  - Bash / Shell
  - JSON
  - And many more (see `src/language.ts` for full list)
- Code blocks with and without language specification
- Inline code spans

### ✅ Blockquotes
- Simple blockquotes
- Nested blockquotes
- Blockquotes with formatted content

### ✅ Special Elements
- Horizontal rules
- Line breaks (hard and soft)
- HTML tags (converted or preserved)
- Escaped special characters

### ✅ Complex Nested Structures
- Lists within lists (deep nesting)
- Code blocks within lists
- Blockquotes within lists
- Tables with mixed content

### ✅ Edge Cases
- Empty elements
- Special characters (Unicode, emoji)
- Multiple blank lines
- URLs in plain text

## Plugin Settings to Test

The plugin supports three configurable settings for code blocks:

1. **Code Block Theme**
   - Options: Django, Emacs, FadeToGrey, Midnight, RDark, Eclipse, Confluence (default)
   - Test by changing theme in settings and converting code blocks

2. **Show Line Numbers**
   - Options: true/false
   - Test by toggling and converting code blocks

3. **Collapse Code Blocks**
   - Options: true/false
   - Test by toggling and converting code blocks

## Testing Workflow

### 1. Basic Functionality Test
```
1. Open markdown-test-sample.md in Obsidian
2. Run convert command
3. Paste into Confluence
4. Verify all sections render correctly
```

### 2. Section-by-Section Test
```
1. Select a specific section (e.g., "Tables")
2. Run convert command
3. Paste into Confluence
4. Verify that specific element type works
```

### 3. Settings Test
```
1. Go to Settings > Confluence Converter
2. Change code block settings
3. Convert code block section
4. Verify settings are applied in output
```

### 4. Edge Case Test
```
1. Test with selection (partial content)
2. Test with full document
3. Test with empty document
4. Test with special characters
```

## Known Limitations

Based on the plugin implementation, the following Markdown features are **not fully supported** by Confluence Wiki Markup:

- **Checkboxes**: Converted but Confluence doesn't have native checkbox support
- **Footnotes**: May not convert properly (Markdown extension)
- **Definition Lists**: May not convert properly (Markdown extension)
- **Mathematical expressions**: LaTeX/MathJax may not work in Confluence
- **Some HTML tags**: Complex HTML may not convert cleanly

## Validation Checklist

Use this checklist when testing:

- [ ] All headings render at correct levels
- [ ] Bold, italic, strikethrough work correctly
- [ ] Inline code uses `{{}}` syntax
- [ ] Unordered lists use `*` prefix
- [ ] Ordered lists use `#` prefix
- [ ] Nested lists maintain proper indentation
- [ ] Links use `[text|url]` format
- [ ] Images use `!image!` format
- [ ] Obsidian `![[filename]]` converts to `!filename!`
- [ ] Tables use `||` for headers and `|` for cells
- [ ] Code blocks use `{code:parameters}` wrapper
- [ ] Language specification works in code blocks
- [ ] Blockquotes use `{quote}` wrapper
- [ ] Horizontal rules render as `----`
- [ ] Line breaks are preserved or handled correctly
- [ ] Special characters are properly escaped/unescaped

## Reporting Issues

If you find conversion issues:

1. Identify the specific Markdown syntax that fails
2. Note the expected Confluence Wiki Markup output
3. Note the actual output from the plugin
4. Check if it's a known limitation
5. Report with minimal reproducible example

## Reference Documentation

- [Confluence Wiki Markup](https://confluence.atlassian.com/doc/confluence-wiki-markup-251003035.html)
- [Confluence Code Block Macro](https://confluence.atlassian.com/doc/code-block-macro-139390.html)
- [Marked.js Documentation](https://marked.js.org/)
- [Obsidian Plugin Development](https://docs.obsidian.md/)

## Contributing Test Cases

To add new test cases:

1. Add Markdown syntax to `markdown-test-sample.md`
2. Add expected Confluence output to `confluence-wiki-markup-sample.txt`
3. Update this README with the new test coverage
4. Test thoroughly in both Obsidian and Confluence

---

Last updated: 2026-01-18
